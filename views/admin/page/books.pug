include ../layout

block content 
    main.col-md-9.ms-sm-auto.col-lg-10.px-md-4
        .d-flex.justify-content-between.flex-wrap.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom
            h1.h2=language.website.headers.books
            .btn-toolbar.mb-2.mb-md-0
                .btn-group.me-2
                    button.btn.btn-sm.btn-outline-secondary(type='button')=language.website.button.share
                    button.btn.btn-sm.btn-outline-secondary(type='button')=language.website.button.export
                    input.form-control(name="dates", readonly="readonly")
        canvas#myChart.my-4.w-100(width='900' height='380' datasetSource="api/books")
        h2=language.website.headers.bookDetails
        table.table
            thead 
                th= language.website.table.headers.title 
                th= language.website.table.headers.publisher 
                th= language.website.table.headers.available
                th= language.website.table.headers.sold 
                th= language.website.table.headers.costAvg 
                th= language.website.table.headers.costMedian
            tbody 
                each book in data 
                    tr 
                        td=book.title.length > 70 ? book.title.substring(0, 70 - 3) + "..." :  book.title
                        td=book.publisher.length > 40 ? book.publisher.substring(0, 40 - 3) + "..." :  book.publisher
                        td=book.available
                        td=book.sold
                        td=book.avgCost.toLocaleString('pl-PL', { style: 'currency', currency: 'PLN' })
                        td=book.median.toLocaleString('pl-PL', { style: 'currency', currency: 'PLN' })